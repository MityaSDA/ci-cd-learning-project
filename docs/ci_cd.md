# CI/CD Pipeline (CI/CD Demo Project)

## Назначение CI/CD

CI/CD (Continuous Integration / Continuous Deployment) в данном проекте (CI/CD Demo Project)
используется для автоматизации полного жизненного цикла приложения:

- проверки качества кода
- запуска автоматических тестов
- сборки Docker-образов
- публикации артефактов
- деплоя backend-приложения
- сборки и публикации документации

CI/CD является неотъемлемой частью архитектуры проекта.

---

## Используемые инструменты

- **GitHub Actions** — система CI/CD
- **Docker** — сборка и упаковка backend
- **Docker Hub** — registry Docker-образов
- **Render** — деплой backend
- **MkDocs** — сборка документации
- **markdownlint** — проверка качества Markdown

---

## Триггеры CI/CD

CI/CD пайплайны запускаются автоматически при следующих событиях:

| Событие | Описание |
|-------|----------|
| Push в `main` | Основной путь деплоя |
| Push тега | Релизная сборка |
| Pull Request | Проверка изменений перед слиянием |

---

## Общая схема CI/CD Pipeline

Git Push / Pull Request

|

v

GitHub Actions

|

+--> Backend tests (pytest)

|

+--> Docker build

|

+--> Docker push

|
+--> Render deploy

|

+--> Docs build

|

+--> GitHub Pages

---

## Backend CI Pipeline

### Назначение

Backend pipeline отвечает за проверку корректности backend-кода
и подготовку production-артефакта.

### Основные шаги

1. Checkout репозитория
2. Установка Python
3. Установка backend-зависимостей
4. Запуск pytest
5. Сборка Docker-образа
6. Публикация Docker-образа
7. Триггер деплоя в Render

---

## Docker Build & Publish

### Контекст сборки

- Dockerfile расположен в `backend/Dockerfile`
- Контекст сборки — директория `backend/`

### Теги Docker-образов

Используется несколько типов тегов:

| Тег | Назначение |
|----|-----------|
| `latest` | Актуальная версия из `main` |
| `vX.Y.Z` | Релизная версия |
| `sha-xxxxxxx` | Сборка по commit hash |

---

## Деплой Backend

Backend деплоится в Render как Web Service.

Процесс деплоя:

1. CI публикует Docker-образ в Docker Hub
2. CI вызывает Render Deploy Hook
3. Render подтягивает новый образ
4. Render перезапускает сервис

Деплой полностью автоматизирован.

---

## CI для документации

### Подход Documentation as Code

Документация рассматривается как полноценный артефакт проекта
и проходит те же стадии CI, что и код.

---

### Проверки документации

В CI выполняются следующие шаги:

1. Проверка Markdown с помощью `markdownlint`
2. Сборка сайта документации через MkDocs
3. Публикация на GitHub Pages

---

### GitHub Pages

- Документация публикуется автоматически
- Источник деплоя — GitHub Actions
- Каждое изменение в `docs/` обновляет сайт документации

---

## Роль технического писателя в CI/CD

Технический писатель:

- отслеживает изменения через Pull Requests
- обновляет документацию вместе с кодом
- следит за успешной сборкой Docs CI
- участвует в ревью изменений API и CI/CD

---

## Обязательные правила

- Любое изменение API → обновление `docs/api.md`
- Любое изменение CI/CD → обновление `docs/ci_cd.md`
- Pull Request считается неполным без обновлённой документации

---

## Контроль качества

CI/CD обеспечивает:

- единый стандарт качества
- раннее обнаружение ошибок
- синхронизацию кода и документации
- прозрачность процессов для команды

---

## Возможные улучшения

- разделение CI и CD пайплайнов
- environment-based deployment
- уведомления в командные каналы
- metrics и monitoring CI
