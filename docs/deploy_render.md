# Деплой в Render CI/CD Demo Project

## Назначение деплоя

Render используется как облачная платформа
для развертывания backend-приложения в production-окружении.

Деплой полностью автоматизирован
и интегрирован в CI/CD пайплайн проекта.

---

## Почему выбран Render

Render выбран для проекта по следующим причинам:

- бесплатный тариф для backend-сервисов
- поддержка Docker-образов
- простая интеграция с GitHub и Docker Hub
- автоматические деплои
- встроенные health checks и логи

Render хорошо подходит для демонстрации production-подходов
в учебных и портфолио-проектах.

---

## Типы сервисов в Render

В проекте используются следующие типы сервисов:

| Сервис | Назначение |
|------|------------|
| Web Service | Backend API |
| Static Site | Frontend (планируется) |

Документация деплоится отдельно через GitHub Pages.

---

## Backend Deployment

### Тип сервиса

Backend разворачивается как **Web Service**.

Параметры сервиса:

| Параметр | Значение |
|--------|----------|
| Runtime | Docker |
| Source | Docker Hub |
| Port | 10000 |
| Instance Type | Free |

---

### Источник Docker-образа

Render получает backend не из GitHub,
а из Docker Hub.

Процесс выглядит следующим образом:

1. GitHub Actions собирает Docker-образ
2. Docker-образ публикуется в Docker Hub
3. Render подтягивает новый образ
4. Render перезапускает backend-сервис

---

### Render Deploy Hook

Для автоматического деплоя используется **Deploy Hook**.

Deploy Hook вызывается из CI после успешного:

- прохождения тестов
- сборки Docker-образа
- публикации образа

Это обеспечивает полный автоматический CD.

---

### Healthcheck

Backend предоставляет healthcheck-эндпоинт:

GET /health


Render использует его для определения состояния сервиса.

---

## Переменные окружения

В текущей версии проекта backend не использует
обязательные environment variables.

В будущем планируется использование:

- DATABASE_URL
- FLASK_ENV
- LOG_LEVEL
- SECRET_KEY

Переменные окружения управляются через Render Dashboard.

---

## Логи и мониторинг

Render предоставляет:

- live-логи сервиса
- историю деплоев
- информацию о рестартах контейнера

Логи используются для:

- диагностики ошибок
- проверки деплоя
- отладки production-проблем

---

## Frontend Deployment (планируется)

Frontend будет развёрнут как **Static Site**.

Планируемая схема:

- сборка frontend через `npm run build`
- деплой статических файлов в Render
- отдельный URL для frontend
- backend доступен через API URL

---

## URL сервиса

Пример production URL backend:

```https
https://myapp-latest-b5gs.onrender.com
```

URL может отличаться в зависимости от окружения
и имени сервиса в Render.

---

## Связь с CI/CD

Деплой в Render является частью CI/CD пайплайна.

Связь выглядит следующим образом:

GitHub Actions

|

v

Docker Hub

|

v

Render Web Service

---

## Роль документации

Документация деплоя необходима для:

- понимания инфраструктуры
- сопровождения сервиса
- онбординга новых участников
- поддержки CI/CD

Любое изменение конфигурации Render
должно сопровождаться обновлением `docs/deploy_render.md`.

---

## Возможные улучшения

- разделение staging и production окружений
- настройка auto-scaling
- настройка алертов
- интеграция с monitoring-системами
