# Backend API Reference CI/CD Demo Project

## Общая информация

Backend предоставляет REST API для выполнения арифметических операций.  
API предназначен для использования frontend-приложением и внешними клиентами.

API реализовано на Flask и следует принципам:

- предсказуемости
- единообразия
- явных контрактов
- понятных ошибок

Все эндпоинты находятся в пространстве имён `/api/*`.

---

## Базовый URL

В зависимости от окружения:

- **Локально**:  
  `http://localhost:10000`

- **Production (Render)**:  
  `https://myapp-latest-b5gs.onrender.com`

---

## Формат ответов API

### Успешный ответ

Все успешные ответы имеют следующий формат:

```json
{
  "success": true,
  "data": {
    "result": 5
  },
  "error": null
}
```

## Поля

| Поле    | Тип     | Описание                     |
|-------- |-------- |------------------------------|
| success | boolean | Признак успешного выполнения |
| data    | object  | Полезные данные ответа       |
| error   | null    | Отсутствует при успехе       |

## Ответ с ошибкой

В случае ошибки API возвращает:

```json
{
  "success": false,
  "data": null,
  "error": {
    "message": "Описание ошибки"
  }
}
```

## Пoля

| Поле          | Тип     | Описание                             |
|---------------|-------- |--------------------------------------|
| success       | boolean | Всегда `false`                       |
| data          | null    | Данные отсутствуют                   |
| error.message | string  | Человекочитаемое описание ошибки     |

---

## Коды HTTP-ответов

| Код | Значение                        |
|-----|---------------------------------|
| 200 | Успешный запрос                 |
| 400 | Ошибка валидации параметров     |
| 404 | Эндпоинт не найден              |
| 500 | Внутренняя ошибка сервера       |

---

## Healthcheck

### `GET /health`

Проверка состояния сервиса.  
Используется платформой Render и системами мониторинга.

**Пример запроса:**

```bash
GET /health
```

**Пример ответа:**

```json
{
  "status": "ok"
}
```

## Арифметические операции

### `GET /api/add`

Складывает два числа.

#### Параметры запроса

| Параметр | Тип    | Обязательный | Описание      |
|----------|--------|--------------|---------------|
| a        | number | да           | Первое число |
| b        | number | да           | Второе число |

**Пример запроса:**

```bash
GET /api/add?a=2&b=3
```

**Пример ответа:**

```json
{
  "success": true,
  "data": {
    "operation": "add",
    "a": 2,
    "b": 3,
    "result": 5
  },
  "error": null
}
```

### `GET /api/multiply`

Умножает два числа.

Параметры запроса

| Параметр | Тип    | Обязательный |
|----------|--------|--------------|
| a        | number | да           |
| b        | number | да           |

**Пример запроса:**

```bash
GET /api/multiply?a=4&b=5
```

**Пример ответа:**

```json
{
  "success": true,
  "data": {
    "operation": "multiply",
    "a": 4,
    "b": 5,
    "result": 20
  },
  "error": null
}
```

### `GET /api/divide`

Делит одно число на другое.

Параметры запроса

| Параметр | Тип    | Обязательный |
|----------|--------|--------------|
| a        | number | да           |
| b        | number | да           |

**Пример запроса:**

```bash
GET /api/divide?a=10&b=2
```

**Пример ответа:**

```json
{
  "success": true,
  "data": {
    "operation": "divide",
    "a": 10,
    "b": 2,
    "result": 5
  },
  "error": null
}
```

## Обработка ошибок

### Деление на ноль

```json
{
  "success": false,
  "data": null,
  "error": {
    "message": "Division by zero is not allowed"
  }
}
```

HTTP статус: 400

## Отсутствующий параметр

```json
{
  "success": false,
  "data": null,
  "error": {
    "message": "Missing query parameter 'a'"
  }
}
```

HTTP статус: 400

## Неверный тип параметра

```json
{
  "success": false,
  "data": null,
  "error": {
    "message": "Query parameter 'a' must be a number"
  }
}
```

HTTP статус: 400

## Версионирование API

В текущей версии проекта API не имеет версионирования в URL.

**Планируемый подход:**

/api/v1/...

/api/v2/...

## Заключение

Backend отвечает за обработку запросов и гарантирует формат ответа

Frontend не должен делать догадок о формате ответа от бэкенда — он должен работать с согласованным форматом

Любое изменение API:

требует обновления docs/api.md

должно быть отражено в PR
